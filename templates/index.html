<!DOCTYPE html>
<html>
<head>
    <title>Tic Tac Toe - Flask App</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            background: #f0f4ff;
        }
        h1 { margin-top: 30px; }
        #board {
            display: grid;
            grid-template-columns: repeat(3, 120px);
            grid-gap: 10px;
            justify-content: center;
            margin-top: 30px;
        }
        .cell {
            width: 120px;
            height: 120px;
            background: white;
            font-size: 60px;
            border: 2px solid #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #msg {
            margin-top: 20px;
            font-size: 24px;
            font-weight: bold;
        }
        button {
            margin-top: 20px;
            padding: 10px 18px;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <h1>Tic Tac Toe</h1>
    <div id="board"></div>
    <div id="msg"></div>
    <button onclick="location.reload()">Restart Game</button>

    <script>
        let winner = null;

        function renderBoard(board) {
            const boardDiv = document.getElementById("board");
            boardDiv.innerHTML = "";
            board.forEach((cell, index) => {
                const div = document.createElement("div");
                div.className = "cell";
                div.innerText = cell;
                div.onclick = () => makeMove(index);
                boardDiv.appendChild(div);
            });
        }

        function makeMove(index) {
            if (winner) return;

            fetch("/move", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ index }),
            })
            .then(res => res.json())
            .then(data => {
                if (data.error) return;
                renderBoard(data.board);
                if (data.winner) {
                    winner = data.winner;
                    document.getElementById("msg").innerText =
                        winner === "Draw" ? "It's a DRAW!" : `Player ${winner} wins! ðŸŽ‰`;
                }
            });
        }

        // Initialize blank board
        renderBoard(["", "", "", "", "", "", "", "", ""]);
    </script>
</body>
</html>
